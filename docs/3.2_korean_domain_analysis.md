# 3.2 한국어 도메인 조사 및 정규화 규칙 정의

## 1. 목적

한국어 음성 전사 텍스트 정규화 시 고려해야 할 **도메인 특성을 체계적으로 정리**하고, 이를 기반으로 **정규화 규칙을 정의**한다. 본 문서는 3.1에서 결정한 "결정적(deterministic) 규칙 기반 정규화" 정책을 구체화하는 단계이다.

### 범위
- 한국어 음성 전사에서 빈번히 발생하는 정규화 이슈 식별
- 정규화 모듈(Kornormalizer) 설계 및 구현 현황
- 사전 데이터 구축 및 관리 방침

---

## 2. 한국어 도메인 특성

### 2.1 숫자 표기의 복잡성

한국어는 숫자를 읽는 방식이 문맥에 따라 달라진다.

#### 고유어 수사 vs 한자어 수사
| 구분 | 예시 | 사용 문맥 |
|------|------|----------|
| 고유어 수사 | 하나, 둘, 셋, 넷... | 개수, 시간(시), 나이 |
| 한자어 수사 | 일, 이, 삼, 사... | 날짜, 번호, 금액, 시간(분/초) |

#### 단위에 따른 읽기 규칙
```
1개   → 한 개 (고유어)
1번   → 일 번 (한자어)
1시   → 한 시 (고유어)
1분   → 일 분 (한자어)
1월   → 일 월 (한자어)
1일   → 일 일 (한자어)
1살   → 한 살 (고유어)
1명   → 한 명 (고유어)
```

#### 큰 숫자 읽기
```
2024년     → 이천 이십 사 년
350만원    → 삼백 오십 만 원
12,345     → 일만 이천 삼백 사십 오
3.14       → 삼 점 일 사
```

### 2.2 알파벳/외래어 처리

#### 영문 약어 발음
```
KBS   → 케이 비 에스
AI    → 에이 아이
USB   → 유 에스 비
GDP   → 지 디 피
```

#### 프로그래밍/기술 용어
```
C++   → 씨 플러스 플러스
C#    → 씨 샵
.NET  → 닷넷
```

#### 버전 표기
```
v2.0    → 버전 이 점 영
iOS 17  → 아이 오 에스 십 칠
```

### 2.3 복합명사 띄어쓰기

한국어는 복합명사를 붙여 쓰는 경향이 강하나, 음성 인식 학습용 텍스트는 형태소 단위 분리가 필요하다.

#### 일반 복합명사
```
데이터베이스시스템   → 데이터베이스 시스템
인공지능기술       → 인공 지능 기술
자연어처리         → 자연어 처리
```

#### 전문용어 보호 (분리하지 않음)
일부 전문용어는 하나의 단위로 인식되어야 하므로 분리하지 않는다.
```
형사사법   → 형사사법 (법률용어, 분리 X)
민사소송   → 민사소송 (법률용어, 분리 X)
```

### 2.4 1음절 명사 특수 처리

한국어에는 끝 1음절만으로 명사가 성립하는 경우가 있다.

```
숲, 강, 꽃, 밤, 집, 길, 말, 눈, 귀, 손...
```

복합명사 분리 시 이러한 1음절 명사를 별도로 관리해야 과분리를 방지할 수 있다.

```
대나무숲   → 대나무 숲 (O)
대나무     → 대나무 (분리 X, '무'는 단독 명사 아님)
```

---

## 3. Kornormalizer 모듈

### 3.1 개요

한국어 음성 전사 텍스트 정규화를 위한 별도 모듈을 구현하였다.

- **저장소**: [LetsGoKDH/Kornormalizer](https://github.com/LetsGoKDH/Kornormalizer)
- **목적**: 음성 인식 결과물을 자연스러운 텍스트로 변환
- **원칙**: 결정적(deterministic) 규칙 기반, 동일 입력 → 동일 출력

### 3.2 모듈 구성

| 모듈 | 기능 | 입력 예시 | 출력 예시 |
|------|------|----------|----------|
| `NumberToKorean` | 숫자→한글 변환 | "2024년" | "이천 이십 사 년" |
| `AlphabetToKorean` | 알파벳→한글 발음 | "KDH" | "케이 디 에이치" |
| `CompoundNounSplitter` | 복합명사 분리 | "데이터베이스시스템" | "데이터베이스 시스템" |

### 3.3 사용 방식

```python
from kornormalizer import Normalizer

# 기본 사용 (숫자, 알파벳 변환)
normalizer = Normalizer()
result = normalizer.normalize("2024년 KBS 방송")
# → "이천 이십 사 년 케이 비 에스 방송"

# 복합명사 분리 포함
normalizer = Normalizer(use_noun_splitter=True)
result = normalizer.normalize("데이터베이스시스템 구축")
# → "데이터베이스 시스템 구축"
```

---

## 4. 사전 데이터

### 4.1 구성 현황

총 **152,000+** 항목의 사전 데이터를 구축하였다.

| 사전 | 항목 수 | 출처 | 라이선스 |
|------|--------|------|----------|
| 일반 명사 (2음절 이상) | 26,219 | 국립국어원 한국어기초사전 | 공공누리 제1유형 |
| 법률용어 | 108,115 | 법제처 국가법령정보센터 | 공공저작물 자유이용허락 |
| 1음절 종료 명사 | 별도 관리 | 자체 구축 | - |

### 4.2 사전 파일 구조

```
data/
├── noun_dictionary.txt       # 일반 명사 (2음절 이상)
├── legal_terms.txt           # 법률용어 (보호 대상)
├── single_syllable_nouns.txt # 1음절 종료 명사
├── protected_terms.txt       # 분리 금지 전문용어
├── alphabet_pronunciation.json # 알파벳 발음 매핑
└── number_rules.json         # 숫자 변환 규칙
```

### 4.3 사전 관리 원칙

1. **공공 데이터 우선**: 저작권 이슈 방지
2. **버전 관리**: 사전 변경 시 버전 태깅
3. **테스트 연동**: 사전 변경 시 회귀 테스트 수행

---

## 5. 구현 현황 및 남은 작업

### 5.1 구현 완료

- [x] 숫자→한글 변환 (기본 규칙)
- [x] 알파벳→한글 발음 변환
- [x] 복합명사 분리 (사전 기반)
- [x] 법률용어 보호 처리
- [x] 1음절 명사 특수 처리

### 5.2 진행 중 / 남은 작업

- [ ] 시간/날짜 표현 세부 규칙 보강
  - 예: "3시 30분", "2024년 1월 15일"
- [ ] 고유어 수사 vs 한자어 수사 문맥 판단 로직
  - 예: "1개" → "한 개", "1번" → "일 번"
- [ ] 테스트 케이스 확장
  - 엣지 케이스 커버리지 향상
- [ ] TAPS 프로젝트 통합
  - `src/taps/normalizer.py`와 연동 또는 의존성 추가

---

## 6. 정규화 파이프라인

3.1에서 결정한 파이프라인에 따라, 정규화는 다음 순서로 적용된다.

```
text_verified
    │
    ▼
┌─────────────────────────────────────┐
│ 1. 공백 정리 (trim, 연속 공백 축약)    │
├─────────────────────────────────────┤
│ 2. 숫자 → 한글 변환                   │
├─────────────────────────────────────┤
│ 3. 알파벳 → 한글 발음 변환             │
├─────────────────────────────────────┤
│ 4. 복합명사 분리 (선택적)              │
├─────────────────────────────────────┤
│ 5. 최종 공백 정리                     │
└─────────────────────────────────────┘
    │
    ▼
text_normalized
```

---

## 7. 다음 단계 (3.3으로의 연결)

- **3.3 라벨링 자동화 워크플로우 구성**에서는 본 문서에서 정의한 정규화 규칙을 실제 파이프라인에 통합한다.
- Kornormalizer 모듈을 TAPS 프로젝트의 `src/taps/normalizer.py`에 연동한다.
- 트리아지 시스템과 연계하여 정규화 결과의 품질을 자동 검증하는 체계를 구축한다.

---

*작성일: 2026-01-12*
